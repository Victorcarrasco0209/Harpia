// CONFIGURACI칍N DE SEGURIDAD (Reemplaza el texto entre comillas con tu llave)
const API_KEY = "AIzaSyAKFnTLWhdHvkfFx7KDxbBwf8Wz-JR1b9A"; 
const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=" + API_KEY;

async function generarPlanificacion() {
    const materia = document.querySelector('select:nth-of-type(1)').value;
    const grado = document.querySelector('select:nth-of-type(2)').value;
    const tema = document.querySelector('input[type="text"]').value;
    const boton = document.querySelector('button');

    if (!tema) {
        alert("Por favor, escribe un tema.");
        return;
    }

    boton.innerText = "Harpia est치 pensando... 游분";
    boton.disabled = true;

    // El "Prompt" o instrucci칩n para la IA
    const promptData = {
        contents: [{
            parts: [{
                text: `Eres Harpia, experto en MEDUCA Panam치. Crea una planificaci칩n para ${materia} de ${grado} sobre: ${tema}. 
                Usa el formato: Inicio, Desarrollo y Cierre. Incluye indicadores de logro.`
            }]
        }]
    };

    try {
        const response = await fetch(API_URL, {
            method: 'POST',
            body: JSON.stringify(promptData)
        });

        const data = await response.json();
        const textoIA = data.candidates[0].content.parts[0].text;

        // Aqu칤 mostramos el resultado (Por ahora en un alert, luego en el dise침o)
        alert("춰Planificaci칩n Generada!\n\n" + textoIA);
        
    } catch (error) {
        console.error("Error:", error);
        alert("Hubo un error al conectar con el cerebro de Harpia.");
    } finally {
        boton.innerText = "Generar con IA 游";
        boton.disabled = false;
    }
}

document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('button').onclick = generarPlanificacion;
});
